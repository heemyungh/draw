<!DOCTYPE html>
<html>
    <head>
        <title>Draw</title>
        <script src="https://d3js.org/d3.v4.min.js"></script>
        <script src="scripts.js"></script>
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <h1>Draw Here</h1>
        <select id="color">
            <option value="red">Red</option>
            <option value="blue">Blue</option>
            <option value="green">Green</option>
            <option selected value="black">Black</option>
            <option value="white">Erase</option>
        </select>
        <select id="r">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option selected value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
        </select>
        <button id="clear">Clear</button>
        <br>
        <svg id="svg" style="width: 100%; height: 800px;"/>

        <script>
            const svg = d3.select("#svg");
            let isdraw = false;
            let prev = [];

            function draw_point() {
                if (!isdraw) {
                    return;
                }

                // stores where pointer is
                const coords = d3.mouse(this);
                const r = document.querySelector("#r").value;
                const color = document.querySelector("#color").value;

                svg.append("circle")
                    .attr("cx", coords[0])
                    .attr("cy", coords[1])
                    .attr("r", r)
                    .style("fill", color);

                if (prev.length) {
                    svg.append("line")
                        .attr("x1", prev[0])
                        .attr("y1", prev[1])
                        .attr("x2", coords[0])
                        .attr("y2", coords[1])
                        .style("stroke", color)
                        .style("stroke-width", 2*r);
                    
                }

                // save these in case next dot is continuous with this
                prev[0] = coords[0];
                prev[1] = coords[1];
            }

            svg.on("mousemove",  draw_point);

            svg.on("mousedown", () => {
                isdraw = true;
            });
            svg.on("mouseup", () => {
                isdraw = false;
                prev = [];
            });
        </script>
    </body>
</html>